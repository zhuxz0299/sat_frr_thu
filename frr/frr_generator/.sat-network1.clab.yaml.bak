name: sat-network
mgmt:
  network: my_network
  ipv4-subnet: 64.0.0.0/24
topology:
  nodes:
    GROUND:
      kind: linux
      image: frrouting/frr:v8.2.2
      binds:
        - sat_output/GROUND1/daemons:/etc/frr/daemons
      exec:
        - ip address add 64.0.0.1/24 dev e1
        - ip address add 64.0.0.2/24 dev e2
        - >-
          vtysh -c 'conf t'

          -c 'router ospf'

          -c 'network 64.0.0.0/24 area 0'

          -c 'exit'

          -c 'exit'

          -c 'write'

          -c '!'
    MEO1:
      kind: linux
      image: frrouting/frr:v8.2.2
      binds:
        - sat_output/MEO1/daemons:/etc/frr/daemons
      exec:
        - ip address add 64.0.0.254/24 dev e1
        - ip address add 64.0.0.3/24 dev e1_1
        - ip address add 64.0.0.4/24 dev e2_1
        - ip address add 64.0.0.5/24 dev e3_1
        - >-
          vtysh -c 'conf t'

          -c 'router ospf'

          -c 'network 64.0.0.0/24 area 0'

          -c 'exit'

          -c 'exit'

          -c 'write'

          -c '!'
    MEO2:
      kind: linux
      image: frrouting/frr:v8.2.2
      binds:
        - sat_output/MEO2/daemons:/etc/frr/daemons
      exec:
        - ip address add 64.0.0.253/24 dev e2
        - ip address add 64.0.0.6/24 dev e1_1
        - ip address add 64.0.0.7/24 dev e2_1
        - ip address add 64.0.0.8/24 dev e3_1
        - >-
          vtysh -c 'conf t'

          -c 'router ospf'

          -c 'network 64.0.0.0/24 area 0'

          -c 'exit'

          -c 'exit'

          -c 'write'

          -c '!'
    LEO1_1:
      kind: linux
      image: frrouting/frr:v8.2.2
      binds:
        - sat_output/LEO1_1/daemons:/etc/frr/daemons
      exec:
        - ip address add 64.0.0.9/24 dev e1_1
        - >-
          vtysh -c 'conf t'

          -c 'router ospf'

          -c 'network 64.0.0.0/24 area 0'

          -c 'exit'

          -c 'exit'

          -c 'write'

          -c '!'
    LEO1_2:
      kind: linux
      image: frrouting/frr:v8.2.2
      binds:
        - sat_output/LEO1_2/daemons:/etc/frr/daemons
      exec:
        - ip address add 64.0.0.10/24 dev e2_1
        - >-
          vtysh -c 'conf t'

          -c 'router ospf'

          -c 'network 64.0.0.0/24 area 0'

          -c 'exit'

          -c 'exit'

          -c 'write'

          -c '!'
    LEO1_3:
      kind: linux
      image: frrouting/frr:v8.2.2
      binds:
        - sat_output/LEO1_3/daemons:/etc/frr/daemons
      exec:
        - ip address add 64.0.0.11/24 dev e3_1
        - >-
          vtysh -c 'conf t'

          -c 'router ospf'

          -c 'network 64.0.0.0/24 area 0'

          -c 'exit'

          -c 'exit'

          -c 'write'

          -c '!'
    LEO2_1:
      kind: linux
      image: frrouting/frr:v8.2.2
      binds:
        - sat_output/LEO2_1/daemons:/etc/frr/daemons
      exec:
        - ip address add 64.0.0.12/24 dev e1_1
        - >-
          vtysh -c 'conf t'

          -c 'router ospf'

          -c 'network 64.0.0.0/24 area 0'

          -c 'exit'

          -c 'exit'

          -c 'write'

          -c '!'
    LEO2_2:
      kind: linux
      image: frrouting/frr:v8.2.2
      binds:
        - sat_output/LEO2_2/daemons:/etc/frr/daemons
      exec:
        - ip address add 64.0.0.13/24 dev e2_1
        - >-
          vtysh -c 'conf t'

          -c 'router ospf'

          -c 'network 64.0.0.0/24 area 0'

          -c 'exit'

          -c 'exit'

          -c 'write'

          -c '!'
    LEO2_3:
      kind: linux
      image: frrouting/frr:v8.2.2
      binds:
        - sat_output/LEO2_3/daemons:/etc/frr/daemons
      exec:
        - ip address add 64.0.0.14/24 dev e3_1
        - >-
          vtysh -c 'conf t'

          -c 'router ospf'

          -c 'network 64.0.0.0/24 area 0'

          -c 'exit'

          -c 'exit'

          -c 'write'

          -c '!'
  links:
    - endpoints:
        - MEO1:e1_1
        - LEO1_1:e1_1

